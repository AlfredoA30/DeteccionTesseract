<?xml version="1.0"?>
<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:noNamespaceSchemaLocation="https://community.rti.com/schema/current/rti_dds_qos_profiles.xsd">

    <!-- QoS Library -->
    <qos_library name="QosLibrary">
        <qos_profile name="DefaultProfile"
                     base_name="BuiltinQosLib::Generic.StrictReliable"
                     is_default_qos="true">
            <domain_participant_qos>
                <participant_name>
                    <name>OCR Text Recognizer</name>
                </participant_name>
            </domain_participant_qos>
        </qos_profile>
    </qos_library>

    <!-- types -->
    <types>
        <struct name="SegmentedText">
            <member name="segment" stringMaxLength="512" type="string"/>
        </struct>
        <struct name="RecognizedText">
            <member name="text" stringMaxLength="512" type="string"/>
        </struct>
    </types>

    <!-- Domain Library -->
    <domain_library name="MyDomainLibrary">
        <domain name="MyDomain" domain_id="0">
            <register_type name="SegmentedText" type_ref="SegmentedText" />
            <register_type name="RecognizedText" type_ref="RecognizedText" />

            <topic name="SegmentedTextTopic" register_type_ref="SegmentedText"/>
            <topic name="RecognizedTextTopic" register_type_ref="RecognizedText"/>
        </domain>
    </domain_library>

    <!-- Participant library -->
    <domain_participant_library name="MyParticipantLibrary">
        <domain_participant name="SegmenterParticipant" domain_ref="MyDomainLibrary::MyDomain">
            <publisher name="SegmenterPublisher">
                <data_writer name="SegmenterWriter" topic_ref="SegmentedTextTopic" />
            </publisher>
        </domain_participant>

        <domain_participant name="RecognizerParticipant" domain_ref="MyDomainLibrary::MyDomain">
            <subscriber name="RecognizerSubscriber">
                <data_reader name="RecognizerReader" topic_ref="SegmentedTextTopic" />
            </subscriber>
            <publisher name="RecognizerPublisher">
                <data_writer name="RecognizerWriter" topic_ref="RecognizedTextTopic" />
            </publisher>
        </domain_participant>

        <domain_participant name="PostProcessorParticipant" domain_ref="MyDomainLibrary::MyDomain">
            <subscriber name="PostProcessorSubscriber">
                <data_reader name="PostProcessorReader" topic_ref="RecognizedTextTopic" />
            </subscriber>
            <publisher name="PostProcessorPublisher">
                <data_writer name="PostProcessorWriter" topic_ref="SegmentedTextTopic" />
            </publisher>
        </domain_participant>

        <domain_participant name="PDFGeneratorParticipant" domain_ref="MyDomainLibrary::MyDomain">
            <subscriber name="PDFGeneratorSubscriber">
                <data_reader name="PDFGeneratorReader" topic_ref="SegmentedTextTopic" />
            </subscriber>
        </domain_participant>
    </domain_participant_library>
</dds>
